<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
    }

    header {
      background-color: #0042db;
      color: #fff;
      text-align: center;
      font-size: 24px;
      padding: 20px;
      border-radius: 0 40px 40px 0;
    }

    .sidebar {
      height: 100%;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #0042db;
      padding-top: 20px;
      border-radius: 0 40px 40px 0;
    }

    .sidebar a {
      padding: 15px;
      text-decoration: none;
      font-size: 18px;
      color: #fff;
      display: block;
      transition: 0.3s;
    }

    .sidebar a i {
      margin-right: 10px;
    }

    .sidebar a:hover {
      background-color: #002080;
    }

    .sidebar a.active {
      background-color: #002080;
    }

    .main-content {
      margin-left: 250px;
      padding: 20px;
    }

    .logout {
      margin-top: 20px;
    }

    /* New styles for the main content */
    .overview-container {
      background-color: #fff;
      margin-top: 29px;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* You can add more specific styles for your content as needed */
    .overview-container h1 {
      color: #333;
    }
  </style>
    <style>
      body {
        margin: 0;
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
      }
  
      header {
        background-color: #0042db;
        color: #fff;
        text-align: center;
        font-size: 24px;
        padding: 20px;
        border-radius: 0 40px 40px 0;
      }
  
      .sidebar {
        height: 100%;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #0042db;
        padding-top: 20px;
        border-radius: 0 40px 40px 0;
      }
  
      .sidebar a {
        padding: 15px;
        text-decoration: none;
        font-size: 18px;
        color: #fff;
        display: block;
        transition: 0.3s;
      }
  
      .sidebar a i {
        margin-right: 10px;
      }
  
      .sidebar a:hover {
        background-color: #002080;
      }
  
      .sidebar a.active {
        background-color: #002080;
      }
  
      .main-content {
        margin-left: 250px;
        padding: 20px;
      }
  
      .logout {
        margin-top: 20px;
      }
  
      /* New styles for the main content */
      .statistics-container {
        background-color: #fff;
        margin-top: 29px;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
  
      /* You can add more specific styles for your content as needed */
      .statistics-container h1 {
        color: #333;
      }
  
      #sales-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
  
      #sales-table th, #sales-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: center;
      }
  
      #sales-table th { 
        background-color: #f2f2f2;
      }
    </style>

<style>
.chart-box {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
}

.chart-dropdown, .chart-round {
  flex-basis: 48%;
}

.chart-dropdown {
  text-align: right;
}

#barChartCanvas, #roundChartCanvas {
  max-width: 100%;
  height: auto;
}

#chartsContainer {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
  }

  #barChart, #pieChart {
    border: 1px solid #ddd;
    border-radius: 6px;
    margin-top: 20px;
  }

  .btn-primary {
    background-color: #007bff;
    border-color: #007bff;
  }

</style>



</head>
<body>

<header>
  Admin Dashboard
</header>

<div class="sidebar">
  <div class="sidebar-heading"></div>
  <a href="adminDashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
  <a href="adminOrder"><i class="fas fa-shopping-cart"></i> Orders</a>
  <a href="adminStatistics"><i class="fas fa-chart-bar"></i> Statistics</a>
  <a href="adminProducts"><i class="fas fa-box"></i> Products</a>
  <a href="adminCategory"><i class="fas fa-box"></i> Category</a>
  <a href="adminUsers"><i class="fas fa-users"></i> Users</a>
  <a href="adminOffers"><i class="fas fa-percent"></i> Offers</a>
  <a href="adminLogin" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
</div>


<div id="chartsContainer" style="
width: 82pc;
position: absolute;
left: 312px;
top: 121px;">
  <div class="container mt-5">
    <div class="row">
        <div class="col-md-8">
            <div class="btn-group">
                <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Select Period
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#" onclick="updateBarChart('daily')">Daily</a></li>
                    <li><a class="dropdown-item" href="#" onclick="updateBarChart('monthly')">Monthly</a></li>
                </ul>
            </div>
            <canvas id="barChart" width="400" height="200"></canvas>
        </div>
        <div class="col-md-4">
          <p>Yealy sales</p>
            <canvas id="pieChart" width="200" height="200"></canvas>
        </div>
    </div>
  </div>
</div>


<div class="main-content">
  <div class="statistics-container" style="    margin-top: -878px;">
    <h1>Sales Report</h1>
    <table id="sales-table">
      <thead>
        <tr>
          <th>ID</th>

          <th>USER NAME</th>
          <th>TOTAL QUANTITY</th>
          <th>TOTAL PRICE</th>

          <th>PAYMENT METHOD</th>
          <th>DATE</th>
          <th>STATUS</th>
        </tr>
      </thead>
      <tbody>
        <%orders.forEach((item)=>{%>
        <tr>
          <td>1</td>
          <td><%=item.address.firstName+" "+item.address.lastName%></td>
          <td><%=item.quantity%></td>
          <td><%=item.finalPrice%></td>
          <td><%=item.paymentMethod%></td>
        
          <td><%=item.orderDate%></td>
          <td><%=item.status%></td>
        </tr>
        <%})%>
      </tbody>
    </table>
  </div>
</div>



 <script>
  document.getElementById('timeframe-select').addEventListener('change', function() {
    var timeframe = this.value;
    console.log("Selected Timeframe: ", timeframe);
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Sample data
  const dataDaily = {
      labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
      datasets: [{
          label: 'Daily Sales',
          data: [12, 19, 3, 5, 2, 3],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
          ],
          borderWidth: 1
      }]
  };
  
  const dataMonthly = {
      labels: ['January', 'February', 'March', 'April', 'May'],
      datasets: [{
          label: 'Monthly Sales',
          data: [120, 190, 300, 500, 200],
          backgroundColor: [
              'rgba(54, 162, 235, 0.2)',
          ],
          borderColor: [
              'rgba(54, 162, 235, 1)',
          ],
          borderWidth: 1
      }]
  };
  
  const pieData = {
      labels: ['Red', 'Blue', 'Yellow'],
      datasets: [{
          label: 'My First Dataset',
          data: [300, 50, 100],
          backgroundColor: [
              'rgb(255, 99, 132)',
              'rgb(54, 162, 235)',
              'rgb(255, 205, 86)'
          ],
          hoverOffset: 4
      }]
  };
  
  let barChart = new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: dataDaily,
      options: {}
  });
  
  new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: pieData,
      options: {}
  });
  
  function updateBarChart(period) {
      if (period === 'daily') {
          barChart.data = dataDaily;
      } else if (period === 'monthly') {
          barChart.data = dataMonthly;
      }
      barChart.update();
  }
  </script>
  



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html> -->








<!-- This is only trail vertion -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <!-- <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
    }

    header {
      background-color: #0042db;
      color: #fff;
      text-align: center;
      font-size: 24px;
      padding: 20px;
      border-radius: 0 40px 40px 0;
    }

    .sidebar {
      height: 100%;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #0042db;
      padding-top: 20px;
      border-radius: 0 40px 40px 0;
    }

    .sidebar a {
      padding: 15px;
      text-decoration: none;
      font-size: 18px;
      color: #fff;
      display: block;
      transition: 0.3s;
    }

    .sidebar a i {
      margin-right: 10px;
    }

    .sidebar a:hover {
      background-color: #002080;
    }

    .sidebar a.active {
      background-color: #002080;
    }

  

    .logout {
      margin-top: 20px;
    }

    .overview-container {
      background-color: #fff;
      margin-top: 29px;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .overview-container h1 {
      color: #333;
    }
  </style>


  <style>
   body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  .main-content {
    max-width: 96%;
    margin: 2% auto;
    padding: 20px;
  }
  .overview-container, .statistics-container {
    background-color: #f9f9f9;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .chart-area, .table-responsive {
    margin-top: 20px;
  }
  .chart-container {
    display: flex;
    justify-content: center;
  }
  canvas {
    width: 100% !important;
    height: auto !important;
  }
  .table-responsive {
    overflow-x: auto;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  th, td {
    text-align: left;
    padding: 8px;
    border-bottom: 1px solid #ddd;
  }
  th {
    background-color: #4CAF50;
    color: white;
  }
  tr:hover {background-color: #f5f5f5;}

  @media screen and (max-width: 768px) {
    .main-content {
      max-width: 100%;
      margin: 0;
      padding: 10px;
    }
  }

.filter-container {
    margin-bottom: 20px;
    text-align: right;
}

.filter-container form {
    display: inline-block;
}

.filter-container input, 
.filter-container button {
    padding: 5px;
    margin: 5px;
}

.filter-container label {
    margin-right: 5px;
}


  </style> -->


  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
      box-sizing: border-box;
    }
    
    header {
      background-color: #0042db;
      color: #fff;
      text-align: center;
      font-size: 24px;
      padding: 20px;
      border-radius: 0 40px 40px 0;
    }
    
    .sidebar {
      height: 100%;
      width: 250px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #0042db;
      padding-top: 20px;
      border-radius: 0 40px 40px 0;
    }
    
    .sidebar a {
      padding: 15px;
      text-decoration: none;
      font-size: 18px;
      color: #fff;
      display: block;
      transition: 0.3s;
    }
    
    .sidebar a:hover, .sidebar a.active {
      background-color: #002080;
    }
    
    .logout {
      margin-top: 20px;
    }
    
    .main-content {
      margin-left: 250px; /* Adjusted to account for the sidebar */
      padding: 20px;
      display: flex;
      justify-content: space-between;
    }
    
    .overview-container, .statistics-container, .additional-content {
      background-color: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .chart-area, .table-responsive, .additional-content {
      margin-top: 20px;
    }
    
    .chart-container {
      flex: 1;
      min-width: 0; /* Fixes flexbox overflow issue */
    }
    
    .additional-content {
      width: 30%; /* Adjust the width as needed */
      padding: 20px;
      /* Adjust other styles as necessary */
    }
    
    .table-responsive {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }
    
    th {
      background-color: #4CAF50;
      color: white;
    }
    
    tr:hover {
      background-color: #f5f5f5;
    }
    
    @media screen and (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }
    
      .additional-content {
        width: 100%;
      }
    }
    
    .filter-container {
      margin-bottom: 20px;
      text-align: right;
    }
    
    .filter-container form {
      display: inline-block;
    }
    
    .filter-container input, .filter-container button {
      padding: 5px;
      margin: 5px;
    }
    
    .filter-container label {
      margin-right: 5px;
    }
    .additional-content{
      position: absolute;
    left: 60pc;
    }
    </style>

    <style>
      .additional-content {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.top-selling-product {
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
  max-width: 300px;
}

.product-image img {
  width: 100%;
  height: auto;
  border-bottom: 1px solid #ddd;
}

.product-details {
  padding: 15px;
  text-align: center;
}

.product-details h3 {
  margin: 0;
  padding: 10px 0;
  font-size: 1.2em;
  color: #333;
}

.product-details p {
  font-size: 0.9em;
  margin: 0 0 20px;
  color: #666;
}

.buy-button {
  
  display: inline-block;
  background-color: #007bff;
  color: #ffffff;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  font-size: 1em;
  transition: background-color 0.3s ease;
}

.buy-button:hover {
  background-color: #0056b3;
}

.btn-super-blue {
        background-color: #0044cc; /* Define your super blue color */
        border-color: #003bb3; /* Slightly darker border for some depth */
        color: #ffffff; /* White text color */
        margin-left: 441px;

    }

    .btn-super-blue:hover {
        background-color: #003bb3; /* Darker shade for hover effect */
        border-color: #0033a2;
    }

    

    </style>
    </head>
    <body>
    
    <header>
      Admin Dashboard
    </header>
    
    <div class="sidebar">
      <div class="sidebar-heading"></div>
      <a href="adminDashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
      <a href="adminOrder"><i class="fas fa-shopping-cart"></i> Orders</a>
      <a href="adminStatistics"><i class="fas fa-chart-bar"></i> Statistics</a>
      <a href="adminProducts"><i class="fas fa-box"></i> Products</a>
      <a href="adminCategory"><i class="fas fa-box"></i> Category</a>
      <a href="adminUsers"><i class="fas fa-users"></i> Users</a>
      <a href="adminOffers"><i class="fas fa-percent"></i> Offers</a>
      <a href="adminCoupons"><i class="fas fa-ticket-alt"></i> Coupons</a>
      <!-- <a href="adminBanner"><i class="fas fa-scroll"></i> Banner</a> -->
      <a href="/adminLogOut" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
    <div class="main-content">
      
      <div class="overview-container" style="margin-left: 40px;">
        

        <!-- <div class="content" style="display: flex">
          <div class="col">
            <input type="date" name="startingdate" id="startingDate" class="form-control">
          </div>
          <div class="col">
            <input type="date" name="endingdate" id="endingDate" class="form-control">
          </div>
         
        </div>
        <br>
        <button class="btn btn-primary btn-block" onclick="generateReport('pdf')">PDF Report</button>
        <button class="btn btn-primary btn-block" onclick="generateReport('excel')">Excel Report</button>
      </div> -->


      <div class="content" style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <div class="col" style="flex: 1; margin-right: 10px;">
          <label for="startingDate" class="form-label">From:</label>
          <input type="date" name="startingdate" id="startingDate" class="form-control">
        </div>
        <div class="col" style="flex: 1;">
          <label for="endingDate" class="form-label">To:</label>
          <input type="date" name="endingdate" id="endingDate" class="form-control">
        </div>
      </div>
      <div style="display: flex; justify-content: space-between;">
        <button class="btn btn-super-blue" style="flex-grow: 1; margin-right: 10px;" onclick="generateReport('pdf')">Generate PDF Report</button>
        <button class="btn btn-primary btn-block" style="flex-grow: 1;" onclick="generateReport('excel')">Excel Report</button>
      </div>

      


                     <!-- <form id="filter-form" action="/generateInvoice" method="get">
                      <div class="mb-3">
                        <label for="from-date" class="form-label">From:</label>
                        <input type="date" class="form-control" id="from-date" name="from_date">
                      </div>
                      
                      <div class="mb-3">
                        <label for="to-date" class="form-label">To:</label>
                        <input type="date" class="form-control" id="to-date" name="to_date">
                      </div>
                      <a href="/generateInvoice"> <button type="submit"  class="btn btn-super-blue" onclick="generateReport('pdf')" >Generate Pdf Report</button></a>
                      <button class="btn btn-primary btn-block" style="position: relative;
                      left: 305px;
                      top: -37px;" onclick="generateReport('excel')">Excel Report</button>
                    </form> -->


        <!-- Card Body -->
        <div class="card-body">
          <label for="chartSelector">Select Chart Type:</label>
          <select class="form-control" id="chartSelector" onchange="updateChart()">
            <option value="mychart1">Weekly Orders</option>
            <option value="mychart2">Monthly Orders</option>
            <option value="mychart3">Yearly Orders</option>
          </select>
          <div class="chart-area">
            <!-- Chart code start here -->
            <div class="chart-container">
              <canvas id="mychart1" data-dates="<%= JSON.stringify(dates) %>"
                data-dailyOrder="<%=JSON.stringify(orderCounts)%>"></canvas>
              <canvas id="mychart2" data-monthly="<%= JSON.stringify(monthdata) %>"></canvas>
              <canvas id="mychart3" data-yearlyOrders="<%=JSON.stringify(totalOrderCount3)%>"></canvas>
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- Additional content box on the right -->
   
      <div class="container mt-2" style="width: 40%;">
        <div class="row">
            <div class="col-12" style="position: relative;
            margin-top: -8px;
            padding-bottom: 19px;">
                <div class="card">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h4 class="card-title mb-0">Top Selling Products</h4>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                Options
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <li><a class="dropdown-item" href="#" id="showProducts">Products</a></li>
                                <li><a class="dropdown-item" href="#" id="showBrands">Brands</a></li>
                            </ul>
                        </div>
                        
                    </div>
                    <ul class="list-group list-group-flush" id="productList">
                      <% topProducts.forEach(function(item) { %>
                        <li class="list-group-item">
                          <div class="row align-items-center">
                            <div class="col-4">
                              <!-- Assuming item.imageUrl contains the correct path; adjust accordingly -->
                              <img src="<%= item.imageUrl %>" class="img-fluid rounded-start" alt="<%= item.productName %>" style="max-width:100%; height:auto;">
                            </div>
                            <div class="col-8">
                              <h5 class="mb-1"><%= item.productName %></h5>
                              <p class="mb-1">Total Quantity: <%= item.totalQuantity %></p>
                              <small class="text-muted">Total Revenue: $<%= item.totalSales.toFixed(2) %></small>
                            </div>
                          </div>
                        </li>
                      <% }); %>
                    </ul>

                    <nav aria-label="Product pagination">
                      <ul class="pagination">
                        <li class="page-item <%= page <= 1 ? 'disabled' : '' %>">
                          <a class="page-link" href="?page=<%= page - 1 %>&limit=<%= limit %>" tabindex="-1">Previous</a>
                          <!-- Dynamically generate page numbers here -->
                        <% for(var i = 1; i <= maxPage; i++) { %>
                          <li class="page-item <%= page === i ? 'active' : '' %>">
                            <a class="page-link" href="?page=<%= i %>&limit=<%= limit %>"><%= i %></a>
                          </li>
                        <% } %>
                        <li class="page-item <%= page >= maxPage ? 'disabled' : '' %>">
                          <a class="page-link" href="?page=<%= page + 1 %>&limit=<%= limit %>">Next</a>
                        </li>
                        </li>
                        
                      </ul>
                    </nav>
                    
                    <!-- Optionally, place where brands will be shown -->
                    <div id="brandsList" style="display:none;" class="list-group list-group-flush">
                        <!-- Dynamically add brand items here -->
                        <% topBrands.forEach(function(item) { %>
                        <li class="list-group-item"><%=item.brand%></li>
                        <!-- Add more brand items as needed -->
                        <% }); %>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Chart code End here -->
  
          <!-- <div class="main-content">
            <div class="statistics-container">
                <div class="filter-container">
                    <form id="filter-form" action="/adminDashboard" method="get">
                        <label for="from-date">From:</label>
                        <input type="date" id="from-date" name="from_date" >
                        
                        <label for="to-date">To:</label>
                        <input type="date" id="to-date" name="to_date" >
    
                        <button type="submit">Filter</button>
                    </form>
                </div>
                <h1>Sales Report</h1>
                <table id="sales-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>USER NAME</th>
                            <th>TOTAL QUANTITY</th>
                            <th>TOTAL PRICE</th>
                            <th>PAYMENT METHOD</th>
                            <th>DATE</th>
                            <th>STATUS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <%orders.forEach((item)=>{%>
                        <tr>
                            <td>1</td>
                            <td><%=item.address.firstName+" "+item.address.lastName%></td>
                            <td style="position: relative; left: 55px;"><%=item.totalQuantity%></td>
                            <td style="position: relative;left: 30px;"><%=item.totalPrice%></td>
                            <td style="position: relative; left: 55px;"><%=item.paymentMethod%></td>
                        
                            <td><%= new Date(item.orderDate).toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: 'numeric' }) %></td>
                            <td><%=item.products[0].status%></td>
                        </tr>
                        <%})%>
                    </tbody>
                </table>
            </div>
        </div>
        </div>
      </div>
    </div>
  </div> -->


</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" #mychart1integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>



<script>
  function generateReport(reportType) {
   const startingDate = document.getElementById('startingDate').value;
   const endingDate = document.getElementById('endingDate').value;

   if (reportType === 'pdf') {
     // Redirect to the PDF generation route with query parameters
     window.location.href = `/generateInvoice?startingdate=${startingDate}&endingdate=${endingDate}`;
   } else if (reportType === 'excel') {
     // Redirect to the Excel generation route with query parameters
     window.location.href = `/excelReport?startingdate=${startingDate}&endingdate=${endingDate}`;
   }
 }

</script>


<script>
  document.addEventListener("DOMContentLoaded", function() {
      document.getElementById("showProducts").addEventListener("click", function() {
          document.getElementById("productList").style.display = "";
          document.getElementById("brandsList").style.display = "none";
      });

      document.getElementById("showBrands").addEventListener("click", function() {
          document.getElementById("productList").style.display = "none";
          document.getElementById("brandsList").style.display = "";
      });
  });
</script>




<script>
  const ctx = document.getElementById('topSellingProductsChart').getContext('2d');
  const topSellingProductsChart = new Chart(ctx, {
      type: 'bar', // This defines the type of chart
      data: {
          labels: ['Product A', 'Product B', 'Product C', 'Product D', 'Product E'], // Replace with your product names
          datasets: [{
              label: 'Top Selling Products',
              data: [50, 60, 70, 45, 65], // Replace with your sales data
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
              ],
              borderColor: [
                  'rgba(255, 99, 132, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
                  'rgba(153, 102, 255, 1)',
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>



<script>
  document.addEventListener("DOMContentLoaded", function () {
    
    const chart1Container = document.querySelector('#mychart1');
    const rawDates = chart1Container.getAttribute('data-dates');
    const dates = JSON.parse(rawDates);
    const rawDailyOrders = chart1Container.getAttribute('data-dailyOrder');
    const dailyOrders = JSON.parse(rawDailyOrders);

    const orderEndDate = moment(dates[dates.length - 1]); // Use the last order date as the end date
    const lastSevenDays = [];
    let orders = [];

    // Generate labels for the last 7 days from the current date
    for (let i = 6; i >= 0; i--) {
      const date = orderEndDate.clone().subtract(i, 'days').format('YYYY-MM-DD');
      let index = dates.indexOf(date);
      if (index !== -1) {
        orders.push(dailyOrders[index]);
      } else {
        orders.push(0);
      }
      lastSevenDays.push(date);
    }

    const ctx1 = document.getElementById('mychart1').getContext('2d');
    const masspopchart1 = new Chart(ctx1, {
      type: 'line',
      data: {
        labels: lastSevenDays,
        datasets: [{
          label: 'Weekly Orders',
          data: orders,
          backgroundColor: ['rgb(54, 162, 235)','rgb(255, 99, 132)'],
          barThickness: 20
        }]
      },
      options: {
        animation: {
          duration: 2000,
          easing: 'easeInOutQuart',
          onProgress: function (animation) {
            console.log("progress", animation.progress);
          },
          onComplete: function (animation) {
            console.log('Animation complete');
          }
        }
      }
    });


    // Chart 2
  
  
  
    const chart2Container = document.querySelector('#mychart2');
    document.getElementById("mychart2").style.display = "none";
    const rawMonthlyOrders = chart2Container.getAttribute('data-monthly');
    const monthlyData = JSON.parse(rawMonthlyOrders);

    const currentDate = new Date();
    const currentYear1 = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1;

    const monthlyLabels = Array.from({ length: 12 }, (_, index) => {
      const year = currentMonth + index > 12 ? currentYear1 + 1 : currentYear1;
      const month = (currentMonth + index) % 12 || 12;
      return `${year}-${month.toString().padStart(2, '0')}`;
    });

    const ctx2 = document.getElementById('mychart2').getContext('2d');

    let masspopchart2 = new Chart(ctx2, {
      type: 'polarArea',
      data: {
        labels: monthlyLabels,
        datasets: [{
          label: 'Monthly Orders',
          data: monthlyData,
          backgroundColor: ['rgb(255, 205, 86)', 'rgb(54, 162, 235)',],
          barThickness: 20
        }]
      },
      options: {
        responsive: true,
  maintainAspectRatio: false,
        animation: {
          duration: 2000,
          easing: 'easeInOutQuart',
          onProgress: function (animation) {
            console.log(animation.progress);
          },
          onComplete: function (animation) {
            console.log('Animation complete');
          }
        },
        scales: {
          x: {
            type: 'category',
            labels: monthlyLabels,
            ticks: {
              autoSkip: false,
              maxRotation: 45,
            }
          },
          y: {
            beginAtZero: true,
          }
        }
      }
    });

    // Chart 3
    const chart3Container = document.querySelector('#mychart3');
    document.getElementById("mychart3").style.display = "none";
    const rawYearlyOrders = chart3Container.getAttribute('data-yearlyOrders');
    const yearlyOrders = rawYearlyOrders.split(',').map(Number);

    const currentYear = new Date().getFullYear();

    const yearlyLabels = Array.from({ length: 5 }, (_, index) => currentYear + index);

    const ctx3 = document.getElementById('mychart3').getContext('2d');

    let masspopchart3 = new Chart(ctx3, {
      type: 'pie',
      data: {
        labels: yearlyLabels,
        datasets: [{
          label: 'Yearly Orders',
          data: yearlyOrders,
          backgroundColor: ['rgba(144, 238, 144, 20)','rgba(54, 162, 235, 0.2)'],
          barThickness: 20
        }]
      },
      options: {
        responsive: true,
  maintainAspectRatio: false,
        animation: {
          duration: 2000,
          easing: 'easeInOutQuart',
          onProgress: function (animation) {
            console.log(animation.progress);
          },
          onComplete: function (animation) {
            console.log('Animation complete');
          }
        },
        scales: {
          x: {
            type: 'category',
            labels: yearlyLabels.map(String),
            ticks: {
              autoSkip: false,
              maxRotation: 45,
            }
          },
          y: {
            beginAtZero: true,
          }
        }
      }
    });
  });

  function updateChart() {
    var selectedChart = document.getElementById("chartSelector").value;

    // Hide all charts
    document.getElementById("mychart1").style.display = "none";
    document.getElementById("mychart2").style.display = "none";
    document.getElementById("mychart3").style.display = "none";

    // Show the selected chart
    document.getElementById(selectedChart).style.display = "block";
  }

</script>


</body>
</html>
